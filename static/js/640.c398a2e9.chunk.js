"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[640],{640:(e,t,o)=>{o.r(t),o.d(t,{default:()=>f});var r=o(5043),s=o(7129),n=o(6951),a=o(5444),i=o(6568),l=o(349),c=o(7185),d=o(579);const u=e=>{let{onCheckAnswer:t,onRevealAnswer:o,onShowHint:r,onRandomize:n,onNextExercise:a,config:i={},isAnswerCorrect:l=!1,isRevealed:u=!1,customButton:h=null}=e;const{t:p}=(0,s.s)(),{showCheck:g=!!t,checkButtonText:x=p("buttons.check","\u2714\ufe0f Check"),showReveal:m=!!o,revealButtonText:f=p("buttons.revealAnswer","\ud83e\udd2b Reveal Answer"),showHint:y=!!r,hintButtonText:w=p("buttons.help","\ud83d\udca1 Hint"),showRandomize:b=!!n,randomizeButtonText:v=p("buttons.randomize","\ud83c\udfb2 Randomize"),showNext:C=!!a,nextButtonText:j=p("buttons.next","\u27a1\ufe0f Next Exercise")}=i,k=!l&&!u;return(0,d.jsxs)("div",{className:"exercise-action-buttons",children:[y&&r&&(0,d.jsx)(c.A,{onClick:r,disabled:!k,className:"button--warning",children:w}),b&&n&&(0,d.jsx)(c.A,{onClick:n,disabled:!k&&!C,className:"button--secondary",children:v}),g&&t&&(0,d.jsx)(c.A,{onClick:t,disabled:!k,className:"button--success",children:x}),m&&o&&(0,d.jsx)(c.A,{onClick:o,disabled:!k,className:"button--info",children:f}),h,C&&a&&(0,d.jsx)(c.A,{onClick:a,className:"",children:j})]})},h=e=>{let{message:t,type:o,language:r}=e;const s=(0,i.A)("string"===typeof t?t:"",r),n="string"===typeof t&&r?s:t,{isLatinized:l}=(0,a.te)();if(!t)return(0,d.jsx)("div",{style:{minHeight:"24px",margin:"10px 0"},"aria-live":"polite"});let c={padding:"15px",margin:"10px 0",borderRadius:"8px",textAlign:"center",minHeight:"24px",fontWeight:"bold",animation:"fadeIn 0.5s ease-in-out"};"correct"===o&&(c.animation="correct-answer-animation 0.5s ease-in-out");let u="";switch(o){case"correct":c.backgroundColor="var(--color-success-bg)",c.color="var(--color-success-text)",c.borderColor="var(--color-success-border)",u="\ud83c\udf89 ";break;case"incorrect":c.backgroundColor="var(--color-danger-bg)",c.color="var(--color-danger-text)",c.borderColor="var(--color-danger-border)",u="\ud83e\udd14 ";break;case"hint":c.backgroundColor="var(--color-warning-bg)",c.color="var(--color-warning-text)",c.borderColor="var(--color-warning-border)",u="\ud83d\udca1 ";break;case"info":c.backgroundColor="var(--color-info-bg)",c.color="var(--color-info-text)",c.borderColor="var(--color-info-border)",u="\u2139\ufe0f ";break;case"error":c.backgroundColor="var(--color-danger-bg)",c.color="var(--color-danger-text)",c.borderColor="var(--color-danger-border)",u="\u26a0\ufe0f ";break;default:c.backgroundColor="var(--color-surface-medium)",c.color="var(--color-text-primary)",c.borderColor="var(--color-border)"}return l&&"string"===typeof n&&"string"===typeof t&&n!==t&&(c.fontStyle="italic"),(0,d.jsxs)("div",{style:c,role:"alert","aria-live":"assertive",children:[u,n]})};var p=o(1712);function g(e){const t=[...e];for(let o=t.length-1;o>0;o--){const e=Math.floor(Math.random()*(o+1));[t[o],t[e]]=[t[e],t[o]]}return t}function x(e){if(null===e||void 0===e)return"";let t=String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return t=t.replace(/[\u2019\u2018\u02bc]/g,"'"),t}const m=[{key:"show_word",Component:e=>{let{language:t,days:o,exerciseKey:c,onComplete:g}=e;const[x,m]=(0,r.useState)(""),[f,y]=(0,r.useState)(!0),[w,b]=(0,r.useState)(null),{isLatinized:v}=(0,a.te)(),{t:C,language:j}=(0,s.s)(),k=(0,i.A)(x,t);(0,r.useEffect)(()=>{(0,l.Yj)()},[]);const N=(0,r.useCallback)(async()=>{y(!0),b(null),m("");try{const{data:e,error:r}=await(0,n.Vu)(t,o);if(r)throw new Error(r.message||r.error||"Failed to load vocabulary words.");if(e&&e.length>0){const t=Math.floor(Math.random()*e.length);m(e[t])}else b(C("exercises.noVocabWords","No vocabulary words found for the selected criteria."))}catch(e){console.error("ShowWordExercise - Error fetching word:",e),b(e.message||C("errors.unexpectedError","An unexpected error occurred."))}finally{y(!1)}},[t,o,C]);(0,r.useEffect)(()=>{t&&o&&o.length>0?N():(y(!1),b(C("errors.selectLangDay","Please select a language and day(s).")),m(""))},[N,c,t,o,C]);const S=()=>{g?g():N()},E=v&&x!==k?{fontFamily:"Arial, sans-serif",fontStyle:"italic"}:{};return f?(0,d.jsx)("p",{children:(0,d.jsx)(p.A,{text:C("loading.wordExercise","Loading word..."),langOverride:j})}):w?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h,{message:w,type:"error",language:j}),(0,d.jsx)(u,{onRandomize:S,onNextExercise:S,config:{showNext:!0,showCheck:!1,showHint:!1,showReveal:!1,showRandomize:!0}})]}):x||f?(0,d.jsxs)("div",{style:{textAlign:"center",padding:"20px",border:"1px solid #eee",borderRadius:"8px"},children:[(0,d.jsx)("h3",{children:(0,d.jsx)(p.A,{text:C("titles.randomWord","Random Word"),langOverride:j})}),x&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{fontSize:"2.5rem",margin:"20px 0",padding:"10px",...E},"aria-label":`Word to practice: ${x}`,children:k||x}),(0,d.jsxs)("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"15px"},children:[(0,d.jsxs)("button",{onClick:async()=>{if(x&&t)try{await(0,l.x$)(x,t)}catch(e){console.error("Error pronouncing word:",e),b(C("errors.pronunciationError","Could not pronounce the word. Please ensure your browser supports speech synthesis and audio is enabled."))}},className:"action-button",disabled:!x,children:["\ud83d\udd0a ",(0,d.jsx)(p.A,{text:C("buttons.pronounce","Pronounce"),langOverride:j})]}),(0,d.jsx)(u,{onRandomize:S,onNextExercise:S,config:{showNext:!0,showCheck:!1,showHint:!1,showReveal:!1,showRandomize:!0}})]})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h,{message:C("exercises.noWordToDisplay","No word to display. Try different selections or check data."),type:"info",language:j}),(0,d.jsx)(u,{onRandomize:S,onNextExercise:S,config:{showNext:!0,showCheck:!1,showHint:!1,showReveal:!1,showRandomize:!0}})]})},name:"Show Word"},{key:"type_opposite",Component:e=>{var t;let{language:o,days:x,exerciseKey:m,onComplete:f}=e;const[y,w]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[C,j]=(0,r.useState)([]),[k,N]=(0,r.useState)({message:"",type:""}),[S,E]=(0,r.useState)(!0),[R,A]=(0,r.useState)(null),[W,T]=(0,r.useState)(!1),{isLatinized:$}=(0,a.te)(),z=i.A,{t:L,language:I}=(0,s.s)(),O=(0,r.useCallback)(async()=>{E(!0),A(null),N({message:"",type:""}),w(""),v(""),j([]),T(!1);try{const{data:e,error:t}=await(0,n.pC)(o,x);if(t||!e||0===Object.keys(e).length)return A(L("exercises.noOppositesData","No opposites data found for the selected criteria.")),void E(!1);const r=Object.keys(e);if(0===r.length)return A(L("exercises.noWordsWithOpposites","No words with opposites found.")),void E(!1);const s=r[Math.floor(Math.random()*r.length)],a=e[s];w(s),v(a);const{data:i,error:l}=await(0,n.Vu)(o,x);let c=[];c=!l&&i?i.map(e=>"string"===typeof e?e:e.word).filter(Boolean):[...new Set([...r,...Object.values(e)])],c=c.filter(e=>e!==s&&e!==a),g(c);const d=c.slice(0,3),u=[{text:a,id:`opt_correct_${a}`,isCorrect:!0,status:"unselected"}];if(d.forEach((e,t)=>{u.push({text:e,id:`opt_distractor_${e}_${t}`,isCorrect:!1,status:"unselected"})}),u.length<2)return A(L("exercises.notEnoughOptionsForMCQ","Not enough distinct words to create multiple choice options.")),void E(!1);j(g(u))}catch(e){console.error("TypeOppositeExercise (MCQ) - Error setting up:",e),A(e.message||L("errors.unexpectedError","An unexpected error occurred."))}finally{E(!1)}},[o,x,L]);(0,r.useEffect)(()=>{o&&x&&x.length>0?O():(E(!1),A(L("errors.selectLangDay","Please select a language and day(s).")))},[O,m,o,x,L]);const M=()=>{f?f():O()};return S?(0,d.jsx)("p",{children:L("loading.oppositesExercise","Loading opposites exercise...")}):R?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h,{message:R,type:"error"}),(0,d.jsx)(u,{onNextExercise:M,onRandomize:M,config:{showNext:!0,showRandomize:!0}})]}):0!==C.length||S?(0,d.jsxs)("div",{className:"type-opposite-exercise mcq-variant",children:[(0,d.jsxs)("h3",{children:[(0,d.jsx)(p.A,{text:L("titles.whatIsTheOppositeOf","What is the opposite of:"),langOverride:I}),(0,d.jsx)("strong",{style:{marginLeft:"8px",...$&&y!==z(y,o)&&{fontStyle:"italic"}},children:z(y,o)}),(0,d.jsx)(c.A,{onClick:()=>{y&&o&&(0,l.x$)(y,o).catch(e=>{console.error("Pronunciation error:",e),N({message:L("errors.pronunciationError","Could not pronounce the word."),type:"error"})})},disabled:!y,title:L("tooltips.pronounceWord","Pronounce word"),className:"button--icon",children:"\ud83d\udd0a"})]}),(0,d.jsx)("div",{className:"mcq-options-container",children:C.map(e=>(0,d.jsx)(c.A,{onClick:()=>{return t=e,void(W||S||(T(!0),t.isCorrect?(N({message:L("feedback.correct","Correct!"),type:"correct"}),j(e=>e.map(e=>e.id===t.id?{...e,status:"correct"}:e))):(N({message:L("feedback.incorrectAnswerWas",`Incorrect. The correct opposite of "${z(y,o)}" is "${z(b,o)}".`,{targetWord:z(y,o),correctAnswer:z(b,o)}),type:"incorrect"}),j(e=>e.map(e=>e.id===t.id?{...e,status:"incorrect"}:e.isCorrect?{...e,status:"correct"}:e))),f&&setTimeout(()=>f(),t.isCorrect?1500:2e3)));var t},className:`button--mcq ${e.status}`,disabled:W||S,children:z(e.text,o)},e.id))}),(0,d.jsx)(h,{message:k.message,type:k.type}),(0,d.jsx)(u,{onNextExercise:M,onRandomize:M,isAnswerCorrect:W&&(null===(t=C.find(e=>"correct"===e.status))||void 0===t?void 0:t.isCorrect),config:{showCheck:!1,showHint:!1,showReveal:!1,showNext:!0,showRandomize:!0}})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h,{message:L("exercises.noOppositesPair","No opposites pair available for MCQ. Try different selections."),type:"info"}),(0,d.jsx)(u,{onNextExercise:M,onRandomize:M,config:{showNext:!0,showRandomize:!0}})]})},name:"Type Opposite"},{key:"match_opposites",Component:e=>{let{language:t,days:o,exerciseKey:s}=e;const[l,c]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[w,b]=(0,r.useState)(null),[v,C]=(0,r.useState)(null),[j,k]=(0,r.useState)({}),[N,S]=(0,r.useState)({message:"",type:""}),[E,R]=(0,r.useState)(!0),[A,W]=(0,r.useState)(null),[T,$]=(0,r.useState)(0),[z,L]=(0,r.useState)(!1),[I,O]=(0,r.useState)([]);(0,a.te)();const M=i.A,B=(0,r.useRef)({}),H=(0,r.useRef)(null),P=(0,r.useCallback)(async()=>{R(!0),W(null),S({message:"",type:""}),b(null),C(null),k({}),$(0),L(!1),O([]),B.current={};try{const{data:e,error:r}=await(0,n.pC)(t,o);if(r)throw new Error(r.message||r.error||"Failed to load opposites data.");if(!e||Object.keys(e).length<2)return W(`Not enough opposites data (found ${Object.keys(e).length}) for this exercise. Need at least 2 base pairs.`),c([]),void R(!1);const s=Object.entries(e).map(e=>{let[t,o]=e;return{word:t,opposite:o}}),a=g(s).slice(0,4);if(a.length<1)return W("Could not select enough unique pairs for the exercise."),c([]),void R(!1);c(a),m(g(a.map(e=>e.word))),y(g(a.map(e=>e.opposite)))}catch(e){console.error("MatchOppositesExercise - Error setting up exercise:",e),W(e.message||"An unexpected error occurred."),c([])}finally{R(!1)}},[t,o]);(0,r.useEffect)(()=>{t&&o&&o.length>0?P():(R(!1),W("Please select a language and day(s)."))},[P,s,t,o]);const F=(e,t,o)=>{if(j[e]||z)return;const r={value:e,element:o.target};if("word"===t){if(w&&w.element===o.target)return void b(null);b(r)}else if("opposite"===t){if(v&&v.element===o.target)return void C(null);C(r)}},K=(0,r.useCallback)((e,t)=>{if(!e||!t||!H.current)return;const o=H.current.getBoundingClientRect(),r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),n=r.left+r.width/2-o.left+H.current.scrollLeft,a=r.top+r.height/2-o.top+H.current.scrollTop,i=s.left+s.width/2-o.left+H.current.scrollLeft,l=s.top+s.height/2-o.top+H.current.scrollTop,c=`line-${x(e.textContent)}-${x(t.textContent)}`;O(e=>[...e,{x1:n,y1:a,x2:i,y2:l,key:c}])},[]);(0,r.useEffect)(()=>{if(w&&v){const e=w.value,t=v.value;l.some(o=>o.word===e&&o.opposite===t)?(S({message:"Correct Match!",type:"correct"}),k(o=>({...o,[e]:!0,[t]:!0})),w.element&&v.element&&K(w.element,v.element),$(e=>e+1),b(null),C(null)):(S({message:"Incorrect Match. Try again.",type:"incorrect"}),w.element&&w.element.classList.add("incorrect-flash"),v.element&&v.element.classList.add("incorrect-flash"),setTimeout(()=>{w&&w.element&&w.element.classList.remove("incorrect-flash"),v&&v.element&&v.element.classList.remove("incorrect-flash"),b(null),C(null)},1e3))}},[w,v,l,K]),(0,r.useEffect)(()=>{l.length>0&&T===l.length&&!z&&S({message:"All pairs matched! Well done!",type:"success"})},[T,l.length,z]);if(E)return(0,d.jsx)("p",{children:"Loading matching exercise..."});if(A)return(0,d.jsx)(h,{message:A,type:"error"});if(0===l.length&&!E)return(0,d.jsx)(h,{message:"No pairs available for this exercise.",type:"info"});const _={display:"flex",flexDirection:"column",gap:"8px",alignItems:"center",margin:"0 15px",flex:1},D=(e,t)=>{let o={padding:"12px 18px",border:"2px solid #ddd",borderRadius:"8px",cursor:"pointer",minWidth:"150px",textAlign:"center",backgroundColor:"#fff",transition:"background-color 0.2s, border-color 0.2s, transform 0.1s",boxShadow:"0 1px 3px rgba(0,0,0,0.05)"};return j[e]?(o.backgroundColor="#e6ffed",o.borderColor="#b7eac9",o.cursor="default",o.fontWeight="bold"):("word"===t&&(null===w||void 0===w?void 0:w.value)===e||"opposite"===t&&(null===v||void 0===v?void 0:v.value)===e)&&(o.backgroundColor="#e0efff",o.borderColor="#90caf9",o.transform="scale(1.03)"),o};return(0,d.jsxs)("div",{style:{textAlign:"center",padding:"20px",border:"1px solid #eee",borderRadius:"8px",maxWidth:"600px",margin:"auto"},children:[(0,d.jsx)("h3",{children:"Match the Opposites"}),(0,d.jsxs)("div",{ref:H,style:{display:"flex",justifyContent:"center",margin:"20px 0",position:"relative"},children:[(0,d.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:0},children:I.map(e=>(0,d.jsx)("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:"#28a745",strokeWidth:"3",opacity:"0.7"},e.key))}),(0,d.jsxs)("div",{style:{..._,zIndex:1},children:[" ",(0,d.jsx)("h4",{children:"Words"}),p.map(e=>(0,d.jsx)("button",{ref:t=>B.current[`word-${e}`]=t,style:D(e,"word"),onClick:t=>F(e,"word",t),disabled:j[e]||z,className:(null===w||void 0===w?void 0:w.value)!==e||j[e]?"":"selected-match-item",children:M(e,t)},`word-${e}`))]}),(0,d.jsxs)("div",{style:{..._,zIndex:1},children:[(0,d.jsx)("h4",{children:"Opposites"}),f.map(e=>(0,d.jsx)("button",{ref:t=>B.current[`opposite-${e}`]=t,style:D(e,"opposite"),onClick:t=>F(e,"opposite",t),disabled:j[e]||z,className:(null===v||void 0===v?void 0:v.value)!==e||j[e]?"":"selected-match-item",children:M(e,t)},`opp-${e}`))]})]}),(0,d.jsx)(h,{message:N.message,type:N.type,language:t}),(0,d.jsx)(u,{onShowHint:!z&&T<l.length?()=>{if(z||T===l.length)return;const e=l.filter(e=>!j[e.word]&&!j[e.opposite]);if(e.length>0){const o=e[0];S({message:`Hint: Try matching "${M(o.word,t)}" or "${M(o.opposite,t)}".`,type:"hint"})}else S({message:"No more hints available.",type:"info"})}:void 0,onRevealAnswer:!z&&T<l.length?()=>{L(!0);const e={},t=[];l.forEach(o=>{e[o.word]=!0,e[o.opposite]=!0;const r=B.current[`word-${o.word}`],s=B.current[`opposite-${o.opposite}`];if(r&&s&&H.current){const e=H.current.getBoundingClientRect(),n=r.getBoundingClientRect(),a=s.getBoundingClientRect(),i=n.left+n.width/2-e.left+H.current.scrollLeft,l=n.top+n.height/2-e.top+H.current.scrollTop,c=a.left+a.width/2-e.left+H.current.scrollLeft,d=a.top+a.height/2-e.top+H.current.scrollTop;t.push({x1:i,y1:l,x2:c,y2:d,key:`line-${x(o.word)}-${x(o.opposite)}`})}}),k(e),O(t),$(l.length),S({message:"All pairs revealed.",type:"info"})}:void 0,onNextExercise:P,config:{showCheck:!1,showHint:!z&&T<l.length&&l.length>0,showReveal:!z&&T<l.length&&l.length>0,showNext:!0}})]})},name:"Match Opposites"},{key:"build_word",Component:e=>{let{language:t,days:o,exerciseKey:c,onComplete:p}=e;const[m,f]=(0,r.useState)(""),[y,w]=(0,r.useState)([]),[b,v]=(0,r.useState)([]),[C,j]=(0,r.useState)({message:"",type:""}),[k,N]=(0,r.useState)(!0),[S,E]=(0,r.useState)(null),[R,A]=(0,r.useState)(!1),[W,T]=(0,r.useState)(!1),{isLatinized:$}=(0,a.te)(),z=i.A,{t:L}=(0,s.s)(),I=z(m,t),O=(0,r.useCallback)(async()=>{N(!0),E(null),j({message:"",type:""}),A(!1),T(!1),f(""),w([]),v([]);try{const{data:e,error:r}=await(0,n.Vu)(t,o);if(r)throw new Error(r.message||r.error||"Failed to load vocabulary words.");if(e&&e.length>0){let t;const o=e.filter(e=>!e.includes(" ")&&e.length>2&&e.length<15);if(o.length>0)t=o[Math.floor(Math.random()*o.length)];else if(t=e[Math.floor(Math.random()*e.length)].split(" ")[0],t.length<=2||t.length>=15)return E(L("exercises.noSuitableWordBuild",'Could not find a suitable word (3-14 letters, no spaces) for "Build Word" exercise.')),void N(!1);f(t),v(Array(t.length).fill({char:null,originalTileId:null})),w(g(t.split("").map((e,t)=>({char:e,id:t,inSlot:!1,slotIndex:null}))))}else E(L("exercises.noWordsFound","No vocabulary words found for the selected criteria."))}catch(e){console.error("BuildWordExercise - Error fetching word:",e),E(e.message||L("errors.unexpectedError","An unexpected error occurred."))}finally{N(!1)}},[t,o,L]);(0,r.useEffect)(()=>{t&&o&&o.length>0?O():(N(!1),E(L("errors.selectLangDay","Please select a language and day(s).")))},[O,c,t,o,L]);const M=e=>{if(R||W||!b[e]||null===b[e].char)return;const t=b[e].originalTileId,o=[...b];o[e]={char:null,originalTileId:null},v(o);const r=y.map(e=>e.id===t?{...e,inSlot:!1,slotIndex:null}:e);w(r),j({message:"",type:""})},B=()=>{p?p():O()};return k?(0,d.jsx)("p",{children:L("loading.buildWordExercise","Loading word building exercise...")}):S?(0,d.jsxs)("div",{className:"build-word-exercise-container",children:[(0,d.jsx)(h,{message:S,type:"error"}),(0,d.jsx)(u,{onNextExercise:B,config:{showNext:!0}})]}):m||k?(0,d.jsxs)("div",{className:"build-word-exercise-container",children:[(0,d.jsx)("h3",{children:L("titles.buildTheWord","Build the Word")}),(0,d.jsx)("button",{onClick:()=>(0,l.x$)(m,t),disabled:!m,title:L("tooltips.pronounceWord","Pronounce the word"),className:"pronounce-button-bwe",children:"\ud83d\udd0a"}),(0,d.jsx)("div",{className:"word-slots-area",children:b.map((e,o)=>(0,d.jsx)("div",{className:"word-slot "+(e.char?"filled-slot":"empty-slot"),onClick:()=>M(o),children:e.char?(0,d.jsx)("span",{className:"slot-char "+($&&e.char!==z(e.char,t)?"latinized-char":""),children:z(e.char,t)}):(0,d.jsx)("span",{className:"slot-placeholder",children:"?"})},`slot-${o}`))}),(0,d.jsxs)("div",{className:"letter-pool-area",children:[y.filter(e=>!e.inSlot).map(e=>(0,d.jsx)("button",{className:"letter-tile",onClick:()=>(e=>{if(R||W||e.inSlot)return;const t=[...b],o=t.findIndex(e=>null===e.char);if(-1!==o){t[o]={char:e.char,originalTileId:e.id},v(t);const r=y.map(t=>t.id===e.id?{...t,inSlot:!0,slotIndex:o}:t);w(r),j({message:"",type:""})}})(e),disabled:R||W,children:(0,d.jsx)("span",{className:$&&e.char!==z(e.char,t)?"latinized-char":"",children:z(e.char,t)})},`tile-${e.id}`)),0===y.filter(e=>!e.inSlot).length&&!W&&!R&&(0,d.jsx)("span",{className:"all-letters-placed-message",children:L("feedback.allLettersPlaced","All letters placed! Check your word.")})]}),(0,d.jsx)(h,{message:C.message,type:C.type,language:t}),(0,d.jsx)(u,{onCheckAnswer:!R&&!W&&b.every(e=>e.char)&&m?()=>{if(R||W||!m)return;x(b.map(e=>e.char).join(""))===x(m)?(j({message:L("feedback.correct","Correct!"),type:"correct"}),T(!0),p&&setTimeout(()=>p(),1500)):j({message:L("feedback.incorrectKeepTrying","Incorrect. Keep trying or use a hint."),type:"incorrect"})}:void 0,onShowHint:R||W||!m?void 0:()=>{if(R||W||!m)return;let e=-1;const o=b.map(e=>e.char).join("");for(let t=0;t<m.length;t++)if(!b[t]||!b[t].char||x(b[t].char)!==x(m[t])){e=t;break}if(-1===e&&o.length<m.length&&(e=o.length),-1!==e){const o=m[e];b[e]&&b[e].char&&x(b[e].char)!==x(o)&&M(e);const r=y.find(e=>!e.inSlot&&x(e.char)===x(o));if(r){const s=[...b];s[e]={char:r.char,originalTileId:r.id},v(s),w(t=>t.map(t=>t.id===r.id?{...t,inSlot:!0,slotIndex:e}:t)),j({message:L("feedback.hintLetterPlaced",`Hint: Letter "${z(o,t)}" placed.`,{letter:z(o,t)}),type:"hint"})}else j({message:L("feedback.hintLetterMisplaced","Hint: Could not find the next correct letter in the pool (it might be misplaced)."),type:"info"})}else j({message:L("feedback.hintWordCorrectOrNoMore","Word seems correct or no more hints applicable."),type:"info"})},onRevealAnswer:R||W||!m?void 0:()=>{m&&(v(m.split("").map((e,t)=>({char:e,originalTileId:-1-t}))),w(y.map(e=>({...e,inSlot:!0,slotIndex:m.indexOf(e.char)}))),j({message:L("feedback.answerIs",`The word is: ${I||m}`,{answer:I||m}),type:"info"}),A(!0),T(!0),p&&setTimeout(()=>p(),2e3))},onNextExercise:B,config:{showCheck:!R&&!W&&b.every(e=>e.char)&&!!m,showHint:!R&&!W&&!!m,showReveal:!R&&!W&&!!m,showNext:!0}}),(0,d.jsxs)("button",{onClick:()=>{!m||R||W||(v(Array(m.length).fill({char:null,originalTileId:null})),w(g(m.split("").map((e,t)=>({char:e,id:t,inSlot:!1,slotIndex:null})))),j({message:"",type:""}))},className:"reset-tiles-button",disabled:R||W||!m,children:["\ud83d\udd04 ",L("buttons.resetTiles","Reset Tiles")]})]}):(0,d.jsxs)("div",{className:"build-word-exercise-container",children:[(0,d.jsx)(h,{message:L("exercises.noWordForBuild","No word available for this exercise."),type:"info"}),(0,d.jsx)(u,{onNextExercise:B,config:{showNext:!0}})]})},name:"Build Word"}],f=e=>{let{language:t,days:o,exerciseKey:n}=e;const{t:a}=(0,s.s)(),[i,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(0),[g,x]=(0,r.useState)(!0),f=(0,r.useCallback)(()=>{x(!0);const e=Math.floor(Math.random()*m.length),t=m[e];console.log(`RandomWordPracticeHost: Selecting exercise type: ${t.name}`),u(t),l(()=>t.Component),p(e=>e+1),x(!1)},[]);(0,r.useEffect)(()=>{console.log(`RandomWordPracticeHost: hostKey changed to ${n}, selecting new initial exercise.`),f()},[n,f]);const y=(0,r.useCallback)(()=>{console.log(`RandomWordPracticeHost: Sub-exercise ${null===c||void 0===c?void 0:c.name} completed. Selecting next one.`),setTimeout(()=>{f()},500)},[f,c]);return g||!i?(0,d.jsx)("p",{children:a("loading.randomWordExercise","Loading Random Word Exercise...")}):(0,d.jsx)("div",{className:"random-word-practice-host-container cosy-exercise-container",children:(0,d.jsx)(i,{language:t,days:o,exerciseKey:h,onComplete:y})})}}}]);
//# sourceMappingURL=640.c398a2e9.chunk.js.map