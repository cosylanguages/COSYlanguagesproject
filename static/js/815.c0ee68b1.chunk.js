"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[815],{815:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s(43),r=s(50),o=s(948),l=s(910),a=s(579);const c=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"neutral",s={border:"1px solid #ddd",padding:"8px",textAlign:"center",minWidth:"100px",backgroundColor:e?"#f2f2f2":"#fff",fontWeight:e?"bold":"normal"};return e||("correct"===t?s.backgroundColor="#d4edda":"incorrect"===t?s.backgroundColor="#f8d7da":"revealed"===t&&(s.backgroundColor="#cfe2ff")),s},i=e=>{let{verb:t,language:s,tensesToShow:i,onCheckAnswers:d,onSetFeedback:u,isRevealedExternally:h,onSetAllCorrect:f}=e;const{t:p}=(0,r.s)(),b=(0,l.A)(),[g,m]=(0,n.useState)({}),[y,x]=(0,n.useState)({}),[j,k]=(0,n.useState)({}),[v,C]=(0,n.useState)({}),S=(0,n.useMemo)(()=>((e,t)=>{if(t&&Object.keys(t).length>0){const e=t[Object.keys(t)[0]];if(e&&e.forms&&Object.keys(e.forms).length>0)return Object.keys(e.forms)}return"COSYfrench"===e?["je","tu","il/elle/on","nous","vous","ils/elles"]:"COSYespa\xf1ol"===e?["yo","t\xfa","\xe9l/ella/usted","nosotros","vosotros","ellos/ellas/ustedes"]:"COSYenglish"===e?["i","you","he/she/it","we","they"]:["pronoun1","pronoun2","pronoun3","pronoun4","pronoun5","pronoun6"]})(s,t.tenses),[s,t.tenses]),w=(0,n.useMemo)(()=>i.filter(e=>t.tenses[e.toLowerCase()]),[i,t.tenses]);(0,n.useEffect)(()=>{const e={},s={},n={},r={};let o=0;const l=S.length*w.length,a=Math.max(1,Math.min(2*S.length,Math.floor(.5*l))),c=[];S.forEach(e=>{w.forEach(t=>{c.push({pronoun:e,tenseKey:t})})});for(let t=c.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[c[t],c[e]]=[c[e],c[t]]}if(c.forEach(l=>{let{pronoun:c,tenseKey:i}=l;const d=`${c}_${i}`,u=t.tenses[i.toLowerCase()],h=u&&u.forms[c]?u.forms[c]:"";h&&(o<a&&Math.random()<.65?(e[d]=h,n[d]="",o++):s[d]=h),r[d]="neutral"}),0===o&&l>0)for(const{pronoun:i,tenseKey:d}of c){const o=`${i}_${d}`,l=t.tenses[d.toLowerCase()],a=l&&l.forms[i]?l.forms[i]:"";if(a){e[o]=a,n[o]="",delete s[o],r[o]="neutral";break}}x(e),k(s),m(n),C(r),u&&u({message:"",type:""})},[t,s,S,w,u]),(0,n.useEffect)(()=>{if(h){const e={},t={...v};Object.keys(y).forEach(s=>{e[s]=y[s].split("/")[0],t[s]="revealed"}),m(e),C(t)}},[h,y,v]);const O=n.useCallback(()=>{let e=!0,t=0;const s={...v};return Object.keys(y).forEach(n=>{const r=(0,o.J2)(g[n]||"");y[n].split("/").map(e=>(0,o.J2)(e)).includes(r)&&""!==r?(s[n]="correct",t++):""===r?(s[n]="neutral",e=!1):(s[n]="incorrect",e=!1)}),C(s),e&&Object.keys(y).length>0&&t===Object.keys(y).length?(u&&u({message:p("feedback.allCorrectTable","All filled answers are correct!"),type:"success"}),f&&f(!0)):!e&&Object.keys(y).length>0?(u&&u({message:p("feedback.someIncorrectTable","Some answers are incorrect. Please review."),type:"incorrect"}),f&&f(!1)):u&&u({message:"",type:""}),e&&t===Object.keys(y).length},[g,y,v,u,p,f]);if((0,n.useEffect)(()=>{d&&(d.current=O)},[d,O]),!t||!t.tenses||0===w.length)return(0,a.jsx)("p",{children:p("loading.noTensesForVerb","No tenses available for this verb or tensesToShow not configured.")});const E=b(t.infinitive,s);return(0,a.jsxs)("div",{style:{margin:"20px 0"},children:[(0,a.jsx)("h4",{children:p("labels.conjugateVerb",`Conjugate the verb: "${E}"`,{verbName:E})}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"10px"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:c(!0),children:p("labels.pronoun","Pronoun")}),w.map(e=>(0,a.jsx)("th",{style:c(!0),children:b(e.replace(/_/g," "),s)},e))]})}),(0,a.jsx)("tbody",{children:S.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:c(),children:b(e,s)}),w.map(t=>{const n=`${e}_${t}`,r=n in y,o=j[n],l=v[n]||"neutral";return(0,a.jsx)("td",{style:c(!1,l),children:r?(0,a.jsx)("input",{type:"text",value:g[n]||"",onChange:s=>((e,t,s)=>{const n=`${e}_${t}`;m(e=>({...e,[n]:s})),C(e=>({...e,[n]:"neutral"})),u&&u({message:"",type:""})})(e,t,s.target.value),disabled:h||"correct"===l,style:{width:"95%",padding:"8px",fontSize:"0.95rem",boxSizing:"border-box",border:"1px solid #ccc",borderRadius:"4px",textAlign:"center"},"aria-label":p("ariaLabels.verbFormFor","Verb form for {pronoun} in {tense}",{pronoun:b(e,s),tense:b(t,s)})}):(0,a.jsx)("span",{style:{fontSize:"0.95rem"},children:b(o,s)})},t)})]},e))})]})]})}}}]);
//# sourceMappingURL=815.c0ee68b1.chunk.js.map