{"version":3,"file":"static/js/286.d7f530e8.chunk.js","mappings":"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","sources":["components/Freestyle/exercises/grammar/PossessivesExercise.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { loadPossessivesData } from '../../../../utils/exerciseDataService';\r\nimport FeedbackDisplay from '../../FeedbackDisplay';\r\nimport ExerciseControls from '../../ExerciseControls';\r\nimport { useLatinizationContext } from '../../../../contexts/LatinizationContext';\r\nimport useLatinization from '../../../../hooks/useLatinization';\r\nimport { normalizeString } from '../../../../utils/stringUtils';\r\nimport { useI18n } from '../../../../i18n/I18nContext';\r\n\r\nconst PossessivesExercise = ({ language, days, exerciseKey }) => {\r\n  const [currentExercise, setCurrentExercise] = useState(null);\r\n  const [userInput, setUserInput] = useState('');\r\n  const [feedback, setFeedback] = useState({ message: '', type: '' });\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isRevealed, setIsRevealed] = useState(false);\r\n  const [exerciseData, setExerciseData] = useState([]);\r\n\r\n  const { isLatinized } = useLatinizationContext();\r\n  const getLatinizedText = useLatinization();\r\n  const { t } = useI18n();\r\n\r\n  const pickNewExercise = useCallback((data) => {\r\n    if (data && data.length > 0) {\r\n      const randomIndex = Math.floor(Math.random() * data.length);\r\n      setCurrentExercise(data[randomIndex]);\r\n      setUserInput('');\r\n      setFeedback({ message: '', type: '' });\r\n      setIsRevealed(false);\r\n      setError(null);\r\n    } else {\r\n      setError(t('exercises.noPossessivesFound', 'No possessives exercises found for the selected criteria.'));\r\n      setCurrentExercise(null);\r\n    }\r\n    setIsLoading(false);\r\n  }, [t]);\r\n\r\n  const fetchAndSetNewExercise = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const { data, error: fetchError } = await loadPossessivesData(language, days);\r\n      if (fetchError) {\r\n        throw new Error(fetchError.message || fetchError.error || t('errors.failedLoadPossessives'));\r\n      }\r\n      // Data for possessives is expected to be an array of items for the given day(s)\r\n      // loadPossessivesData already handles filtering by day.\r\n      setExerciseData(data || []); \r\n      pickNewExercise(data || []);\r\n    } catch (err) {\r\n      console.error(\"PossessivesExercise - Error fetching exercises:\", err);\r\n      setError(err.message || t('errors.unexpectedError'));\r\n      setIsLoading(false);\r\n      setCurrentExercise(null);\r\n    }\r\n  }, [language, days, pickNewExercise, t]);\r\n\r\n  useEffect(() => {\r\n    if (language && days && days.length > 0) {\r\n      fetchAndSetNewExercise();\r\n    } else {\r\n      setIsLoading(false);\r\n      setError(t('errors.selectLangDay'));\r\n      setCurrentExercise(null);\r\n    }\r\n  }, [fetchAndSetNewExercise, exerciseKey, language, days, t]);\r\n\r\n  const handleInputChange = (e) => {\r\n    setUserInput(e.target.value);\r\n    if (feedback.message) setFeedback({ message: '', type: '' });\r\n  };\r\n\r\n  const checkAnswer = () => {\r\n    if (!currentExercise || isRevealed) return;\r\n\r\n    const correctAnswer = currentExercise.answer;\r\n    const normalizedUserInput = normalizeString(userInput);\r\n    const normalizedCorrectAnswer = normalizeString(correctAnswer);\r\n    \r\n    const displayAnswer = isLatinized ? getLatinizedText(correctAnswer, language) : correctAnswer;\r\n\r\n    if (normalizedUserInput === normalizedCorrectAnswer) {\r\n      setFeedback({ message: t('feedback.correct'), type: 'correct' });\r\n    } else {\r\n      setFeedback({ message: t('feedback.incorrectAnswerIs', { correctAnswer: displayAnswer }), type: 'incorrect' });\r\n    }\r\n  };\r\n\r\n  const showHint = () => {\r\n    if (!currentExercise || isRevealed) return;\r\n    // Basic hint: show the first letter of the answer\r\n    const firstLetter = currentExercise.answer[0];\r\n    const latinizedFirstLetter = getLatinizedText(firstLetter, language);\r\n    setFeedback({ message: t('feedback.hintFirstLetterIs', { letter: latinizedFirstLetter }), type: 'hint' });\r\n  };\r\n\r\n  const revealTheAnswer = () => {\r\n    if (!currentExercise) return;\r\n    const correctAnswer = currentExercise.answer;\r\n    const displayAnswer = isLatinized ? getLatinizedText(correctAnswer, language) : correctAnswer;\r\n\r\n    setUserInput(correctAnswer); // Show the full answer in the input\r\n    setFeedback({ message: t('feedback.correctAnswerIs', { correctAnswer: displayAnswer }), type: 'info' });\r\n    setIsRevealed(true);\r\n  };\r\n\r\n  const handleNext = () => {\r\n    setIsLoading(true);\r\n    pickNewExercise(exerciseData);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <p>{t('loading.possessivesExercise', 'Loading possessives exercise...')}</p>;\r\n  }\r\n\r\n  if (error) {\r\n    return <FeedbackDisplay message={error} type=\"error\" />;\r\n  }\r\n\r\n  if (!currentExercise) {\r\n    return <FeedbackDisplay message={t('exercises.noPossessivesLoaded', 'No possessive exercise loaded. Try different selections or check data.')} type=\"info\" />;\r\n  }\r\n\r\n  // Display logic for \"fill_blank\" type\r\n  let sentenceParts = [];\r\n  let placeholder = \"____\"; // Default placeholder\r\n  if (currentExercise.sentence.includes('____')) {\r\n    sentenceParts = currentExercise.sentence.split('____');\r\n  } else if (currentExercise.sentence.includes('_')) { // Allow single underscore as placeholder\r\n    sentenceParts = currentExercise.sentence.split('_');\r\n    placeholder = \"_\";\r\n  } else {\r\n    sentenceParts = [currentExercise.sentence, \"\"]; // No placeholder found, input after sentence\r\n  }\r\n\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center', padding: '20px', border: '1px solid #eee', borderRadius: '8px', maxWidth: '600px', margin: 'auto' }}>\r\n      <h3>{t('titles.fillThePossessive', 'Fill in the Correct Possessive')}</h3>\r\n      <p style={{ fontSize: '1.1rem', margin: '15px 0' }}>\r\n        {getLatinizedText(sentenceParts[0], language)}\r\n        <input\r\n          type=\"text\"\r\n          value={userInput}\r\n          onChange={handleInputChange}\r\n          placeholder={placeholder}\r\n          disabled={isRevealed || isLoading}\r\n          style={{ \r\n            padding: '8px', \r\n            fontSize: '1rem', \r\n            width: `${Math.max(currentExercise.answer.length * 10, 60)}px`, // Dynamic width\r\n            minWidth: '60px',\r\n            maxWidth: '150px',\r\n            margin: '0 5px', \r\n            border: '1px solid #ccc', \r\n            borderRadius: '4px',\r\n            textAlign: 'center'\r\n          }}\r\n        />\r\n        {getLatinizedText(sentenceParts[1] || '', language)}\r\n      </p>\r\n      \r\n      <FeedbackDisplay message={feedback.message} type={feedback.type} language={language} />\r\n      <ExerciseControls\r\n        onCheckAnswer={!isRevealed && !!currentExercise ? checkAnswer : undefined}\r\n        onShowHint={!isRevealed && !!currentExercise ? showHint : undefined}\r\n        onRevealAnswer={!isRevealed && !!currentExercise ? revealTheAnswer : undefined}\r\n        onNextExercise={handleNext}\r\n        config={{\r\n          showCheck: !isRevealed && !!currentExercise,\r\n          showHint: !isRevealed && !!currentExercise,\r\n          showReveal: !isRevealed && !!currentExercise,\r\n          showNext: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PossessivesExercise;\r\n"],"names":["_ref","language","days","exerciseKey","currentExercise","setCurrentExercise","useState","userInput","setUserInput","feedback","setFeedback","message","type","isLoading","setIsLoading","error","setError","isRevealed","setIsRevealed","exerciseData","setExerciseData","isLatinized","useLatinizationContext","getLatinizedText","useLatinization","t","useI18n","pickNewExercise","useCallback","data","length","randomIndex","Math","floor","random","fetchAndSetNewExercise","async","fetchError","loadPossessivesData","Error","err","console","useEffect","_jsx","children","FeedbackDisplay","sentenceParts","placeholder","sentence","includes","split","_jsxs","style","textAlign","padding","border","borderRadius","maxWidth","margin","fontSize","value","onChange","e","target","disabled","width","concat","max","answer","minWidth","ExerciseControls","onCheckAnswer","checkAnswer","correctAnswer","normalizedUserInput","normalizeString","normalizedCorrectAnswer","displayAnswer","undefined","onShowHint","showHint","firstLetter","latinizedFirstLetter","letter","onRevealAnswer","revealTheAnswer","onNextExercise","handleNext","config","showCheck","showReveal","showNext"],"sourceRoot":""}