{"ast":null,"code":"import _objectSpread from\"/workspaces/COSYlanguagesproject/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{loadGenderGrammarData}from'../../../../utils/exerciseDataService';import{useLatinizationContext}from'../../../../contexts/LatinizationContext';import useLatinization from'../../../../hooks/useLatinization';import{shuffleArray}from'../../../../utils/arrayUtils';import FeedbackDisplay from'../../FeedbackDisplay';import ExerciseControls from'../../ExerciseControls';import{useProgress}from'../../../../contexts/ProgressContext';// Import useProgress\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MatchArticlesWordsExercise=_ref=>{let{language,days,exerciseKey}=_ref;const[actualPairs,setActualPairs]=useState([]);const[articlesColumn,setArticlesColumn]=useState([]);const[wordsColumn,setWordsColumn]=useState([]);const[selectedArticle,setSelectedArticle]=useState(null);const[selectedWord,setSelectedWord]=useState(null);const[matchedPairs,setMatchedPairs]=useState({});const[feedback,setFeedback]=useState({message:'',type:''});const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[numCorrectMatches,setNumCorrectMatches]=useState(0);const[isRevealed,setIsRevealed]=useState(false);const{isLatinized}=useLatinizationContext();const getLatinizedText=useLatinization;const progress=useProgress();// Get progress functions\nconst NUM_PAIRS_TO_DISPLAY=4;const setupNewExercise=useCallback(async()=>{setIsLoading(true);setError(null);setFeedback({message:'',type:''});setSelectedArticle(null);setSelectedWord(null);setMatchedPairs({});setNumCorrectMatches(0);setIsRevealed(false);setActualPairs([]);setArticlesColumn([]);setWordsColumn([]);try{const{data:items,error:fetchError}=await loadGenderGrammarData(language,days);if(fetchError){throw new Error(fetchError.message||fetchError.error||'Failed to load gender grammar data.');}if(!items||items.length<NUM_PAIRS_TO_DISPLAY){setError(\"Not enough gender grammar data (found \".concat((items===null||items===void 0?void 0:items.length)||0,\"). Need at least \").concat(NUM_PAIRS_TO_DISPLAY,\" items.\"));setIsLoading(false);return;}const uniqueItems=[];const seenWords=new Set();for(const item of items){if(!seenWords.has(item.word)){uniqueItems.push(item);seenWords.add(item.word);}}if(uniqueItems.length<NUM_PAIRS_TO_DISPLAY){setError(\"Not enough unique gender grammar items (found \".concat(uniqueItems.length,\"). Need at least \").concat(NUM_PAIRS_TO_DISPLAY,\" unique items.\"));setIsLoading(false);return;}const selectedItems=shuffleArray(uniqueItems).slice(0,NUM_PAIRS_TO_DISPLAY);setActualPairs(selectedItems);setArticlesColumn(shuffleArray(selectedItems.map(p=>p.article)));setWordsColumn(shuffleArray(selectedItems.map(p=>p.word)));}catch(err){console.error(\"MatchArticlesWordsExercise - Error setting up:\",err);setError(err.message||'An unexpected error occurred.');}finally{setIsLoading(false);}},[language,days]);useEffect(()=>{if(language&&days&&days.length>0){setupNewExercise();}else{setIsLoading(false);setError(\"Please select a language and day(s).\");}},[setupNewExercise,exerciseKey,language,days]);const handleItemClick=(value,type,ref)=>{if(matchedPairs[value]||isRevealed)return;if(type==='article'){if(selectedArticle&&selectedArticle.elementRef===ref){setSelectedArticle(null);}else{setSelectedArticle({value,elementRef:ref});}setFeedback({message:'',type:''});}else if(type==='word'){if(selectedWord&&selectedWord.elementRef===ref){setSelectedWord(null);}else{setSelectedWord({value,elementRef:ref});}setFeedback({message:'',type:''});}};useEffect(()=>{if(selectedArticle&&selectedWord){const currentWordValue=selectedWord.value;// To avoid issues with stale closure\nconst currentArticleValue=selectedArticle.value;const isCorrectMatch=actualPairs.some(pair=>pair.article===currentArticleValue&&pair.word===currentWordValue);const itemId=\"gender_\".concat(currentWordValue,\"_\").concat(currentArticleValue);if(isCorrectMatch){setFeedback({message:'Correct Match!',type:'correct'});setMatchedPairs(prev=>_objectSpread(_objectSpread({},prev),{},{[currentArticleValue]:true,[currentWordValue]:true}));setNumCorrectMatches(prev=>prev+1);progress.awardCorrectAnswer(itemId,'grammar-match-article');}else{setFeedback({message:'Incorrect Match. Try again.',type:'incorrect'});progress.awardIncorrectAnswer(itemId,'grammar-match-article');if(selectedArticle.elementRef)selectedArticle.elementRef.classList.add('incorrect-flash');if(selectedWord.elementRef)selectedWord.elementRef.classList.add('incorrect-flash');setTimeout(()=>{if(selectedArticle&&selectedArticle.elementRef)selectedArticle.elementRef.classList.remove('incorrect-flash');if(selectedWord&&selectedWord.elementRef)selectedWord.elementRef.classList.remove('incorrect-flash');},1000);}setSelectedArticle(null);setSelectedWord(null);}},[selectedArticle,selectedWord,actualPairs,language,progress]);useEffect(()=>{if(actualPairs.length>0&&numCorrectMatches===actualPairs.length&&!isRevealed){setFeedback({message:'All pairs matched! Well done!',type:'success'});}},[numCorrectMatches,actualPairs.length,isRevealed]);const showHint=()=>{if(isRevealed||numCorrectMatches===actualPairs.length)return;const unMatched=actualPairs.filter(p=>!matchedPairs[p.article]||!matchedPairs[p.word]);// This logic might be tricky if one part of pair is matched\nif(unMatched.length>0){const hintPair=unMatched[0];// Simplified hint: reveals one correct pair\nsetFeedback({message:\"Hint: Try matching \\\"\".concat(getLatinizedText(hintPair.article,language),\"\\\" with \\\"\").concat(getLatinizedText(hintPair.word,language),\"\\\".\"),type:'hint'});}else{setFeedback({message:\"No more hints available.\",type:'info'});}};const revealAllAnswers=()=>{setIsRevealed(true);const allMatched={};actualPairs.forEach(p=>{allMatched[p.article]=true;allMatched[p.word]=true;const itemId=\"gender_\".concat(p.word,\"_\").concat(p.article);progress.scheduleReview(itemId,'grammar-match-article',false);// Mark revealed as incorrect for SRS\n});setMatchedPairs(allMatched);setNumCorrectMatches(actualPairs.length);setFeedback({message:\"All pairs revealed.\",type:'info'});};if(isLoading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading matching exercise...\"});if(error)return/*#__PURE__*/_jsx(FeedbackDisplay,{message:error,type:\"error\"});if(actualPairs.length===0&&!isLoading)return/*#__PURE__*/_jsx(FeedbackDisplay,{message:\"No pairs available for this exercise.\",type:\"info\"});const columnStyle={display:'flex',flexDirection:'column',gap:'8px',alignItems:'stretch',margin:'0 15px',flex:1};const itemStyleBuilder=(value,type)=>{// Removed 'ref' as it's not used for styling directly here\nlet isSelected=type==='article'&&(selectedArticle===null||selectedArticle===void 0?void 0:selectedArticle.value)===value||type==='word'&&(selectedWord===null||selectedWord===void 0?void 0:selectedWord.value)===value;return{padding:'12px 18px',border:\"2px solid \".concat(isSelected?'#007bff':matchedPairs[value]?'#28a745':'#ccc'),borderRadius:'8px',cursor:matchedPairs[value]||isRevealed?'default':'pointer',textAlign:'center',backgroundColor:matchedPairs[value]?'#d4edda':isSelected?'#cfe2ff':'#f8f9fa',transition:'background-color 0.2s, border-color 0.2s',opacity:isRevealed&&!matchedPairs[value]?0.5:1// Dim if revealed and not part of a correct pair\n};};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px',border:'1px solid #eee',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Match Articles with Words\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'flex-start',margin:'20px 0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:columnStyle,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Articles\"}),articlesColumn.map(article=>{const ref=/*#__PURE__*/React.createRef();// Keep ref for click handler to pass element\nreturn/*#__PURE__*/_jsx(\"button\",{ref:ref,style:itemStyleBuilder(article,'article'),onClick:()=>handleItemClick(article,'article',ref.current),disabled:matchedPairs[article]||isRevealed,children:getLatinizedText(article,language)},\"article-\".concat(article));})]}),/*#__PURE__*/_jsxs(\"div\",{style:columnStyle,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Words\"}),wordsColumn.map(word=>{const ref=/*#__PURE__*/React.createRef();// Keep ref for click handler\nreturn/*#__PURE__*/_jsx(\"button\",{ref:ref,style:itemStyleBuilder(word,'word'),onClick:()=>handleItemClick(word,'word',ref.current),disabled:matchedPairs[word]||isRevealed,children:getLatinizedText(word,language)},\"word-\".concat(word));})]})]}),/*#__PURE__*/_jsx(FeedbackDisplay,{message:feedback.message,type:feedback.type,language:language}),/*#__PURE__*/_jsx(ExerciseControls,{onShowHint:!isRevealed&&numCorrectMatches<actualPairs.length?showHint:undefined,onRevealAnswer:!isRevealed&&numCorrectMatches<actualPairs.length?revealAllAnswers:undefined,onNextExercise:setupNewExercise,config:{showCheck:false,showHint:!isRevealed&&numCorrectMatches<actualPairs.length,showReveal:!isRevealed&&numCorrectMatches<actualPairs.length,showNext:true}})]});};export default MatchArticlesWordsExercise;","map":{"version":3,"names":["React","useState","useEffect","useCallback","loadGenderGrammarData","useLatinizationContext","useLatinization","shuffleArray","FeedbackDisplay","ExerciseControls","useProgress","jsx","_jsx","jsxs","_jsxs","MatchArticlesWordsExercise","_ref","language","days","exerciseKey","actualPairs","setActualPairs","articlesColumn","setArticlesColumn","wordsColumn","setWordsColumn","selectedArticle","setSelectedArticle","selectedWord","setSelectedWord","matchedPairs","setMatchedPairs","feedback","setFeedback","message","type","isLoading","setIsLoading","error","setError","numCorrectMatches","setNumCorrectMatches","isRevealed","setIsRevealed","isLatinized","getLatinizedText","progress","NUM_PAIRS_TO_DISPLAY","setupNewExercise","data","items","fetchError","Error","length","concat","uniqueItems","seenWords","Set","item","has","word","push","add","selectedItems","slice","map","p","article","err","console","handleItemClick","value","ref","elementRef","currentWordValue","currentArticleValue","isCorrectMatch","some","pair","itemId","prev","_objectSpread","awardCorrectAnswer","awardIncorrectAnswer","classList","setTimeout","remove","showHint","unMatched","filter","hintPair","revealAllAnswers","allMatched","forEach","scheduleReview","children","columnStyle","display","flexDirection","gap","alignItems","margin","flex","itemStyleBuilder","isSelected","padding","border","borderRadius","cursor","textAlign","backgroundColor","transition","opacity","style","justifyContent","createRef","onClick","current","disabled","onShowHint","undefined","onRevealAnswer","onNextExercise","config","showCheck","showReveal","showNext"],"sources":["/workspaces/COSYlanguagesproject/src/components/Freestyle/exercises/grammar/MatchArticlesWordsExercise.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { loadGenderGrammarData } from '../../../../utils/exerciseDataService';\r\nimport { useLatinizationContext } from '../../../../contexts/LatinizationContext';\r\nimport useLatinization from '../../../../hooks/useLatinization';\r\nimport { shuffleArray } from '../../../../utils/arrayUtils';\r\nimport FeedbackDisplay from '../../FeedbackDisplay';\r\nimport ExerciseControls from '../../ExerciseControls';\r\nimport { useProgress } from '../../../../contexts/ProgressContext'; // Import useProgress\r\n\r\nconst MatchArticlesWordsExercise = ({ language, days, exerciseKey }) => {\r\n  const [actualPairs, setActualPairs] = useState([]); \r\n  const [articlesColumn, setArticlesColumn] = useState([]);\r\n  const [wordsColumn, setWordsColumn] = useState([]);\r\n  \r\n  const [selectedArticle, setSelectedArticle] = useState(null);\r\n  const [selectedWord, setSelectedWord] = useState(null);\r\n  \r\n  const [matchedPairs, setMatchedPairs] = useState({});\r\n  const [feedback, setFeedback] = useState({ message: '', type: '' });\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [numCorrectMatches, setNumCorrectMatches] = useState(0);\r\n  const [isRevealed, setIsRevealed] = useState(false);\r\n\r\n  const { isLatinized } = useLatinizationContext();\r\n  const getLatinizedText = useLatinization;\r\n  const progress = useProgress(); // Get progress functions\r\n\r\n  const NUM_PAIRS_TO_DISPLAY = 4;\r\n\r\n  const setupNewExercise = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setFeedback({ message: '', type: '' });\r\n    setSelectedArticle(null);\r\n    setSelectedWord(null);\r\n    setMatchedPairs({});\r\n    setNumCorrectMatches(0);\r\n    setIsRevealed(false);\r\n    setActualPairs([]);\r\n    setArticlesColumn([]);\r\n    setWordsColumn([]);\r\n\r\n    try {\r\n      const { data: items, error: fetchError } = await loadGenderGrammarData(language, days);\r\n      if (fetchError) {\r\n        throw new Error(fetchError.message || fetchError.error || 'Failed to load gender grammar data.');\r\n      }\r\n\r\n      if (!items || items.length < NUM_PAIRS_TO_DISPLAY) {\r\n        setError(`Not enough gender grammar data (found ${items?.length || 0}). Need at least ${NUM_PAIRS_TO_DISPLAY} items.`);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const uniqueItems = [];\r\n      const seenWords = new Set();\r\n      for (const item of items) {\r\n        if (!seenWords.has(item.word)) {\r\n          uniqueItems.push(item);\r\n          seenWords.add(item.word);\r\n        }\r\n      }\r\n      \r\n      if (uniqueItems.length < NUM_PAIRS_TO_DISPLAY) {\r\n         setError(`Not enough unique gender grammar items (found ${uniqueItems.length}). Need at least ${NUM_PAIRS_TO_DISPLAY} unique items.`);\r\n         setIsLoading(false);\r\n         return;\r\n      }\r\n\r\n      const selectedItems = shuffleArray(uniqueItems).slice(0, NUM_PAIRS_TO_DISPLAY);\r\n      setActualPairs(selectedItems);\r\n      setArticlesColumn(shuffleArray(selectedItems.map(p => p.article)));\r\n      setWordsColumn(shuffleArray(selectedItems.map(p => p.word)));\r\n\r\n    } catch (err) {\r\n      console.error(\"MatchArticlesWordsExercise - Error setting up:\", err);\r\n      setError(err.message || 'An unexpected error occurred.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [language, days]);\r\n\r\n  useEffect(() => {\r\n    if (language && days && days.length > 0) {\r\n      setupNewExercise();\r\n    } else {\r\n      setIsLoading(false);\r\n      setError(\"Please select a language and day(s).\");\r\n    }\r\n  }, [setupNewExercise, exerciseKey, language, days]);\r\n  \r\n  const handleItemClick = (value, type, ref) => {\r\n    if (matchedPairs[value] || isRevealed) return;\r\n\r\n    if (type === 'article') {\r\n      if (selectedArticle && selectedArticle.elementRef === ref) {\r\n        setSelectedArticle(null);\r\n      } else {\r\n        setSelectedArticle({ value, elementRef: ref });\r\n      }\r\n      setFeedback({message: '', type: ''});\r\n    } else if (type === 'word') {\r\n      if (selectedWord && selectedWord.elementRef === ref) {\r\n        setSelectedWord(null);\r\n      } else {\r\n        setSelectedWord({ value, elementRef: ref });\r\n      }\r\n      setFeedback({message: '', type: ''});\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedArticle && selectedWord) {\r\n      const currentWordValue = selectedWord.value; // To avoid issues with stale closure\r\n      const currentArticleValue = selectedArticle.value;\r\n      const isCorrectMatch = actualPairs.some(pair => \r\n        pair.article === currentArticleValue && pair.word === currentWordValue\r\n      );\r\n      const itemId = `gender_${currentWordValue}_${currentArticleValue}`;\r\n\r\n      if (isCorrectMatch) {\r\n        setFeedback({ message: 'Correct Match!', type: 'correct' });\r\n        setMatchedPairs(prev => ({ ...prev, [currentArticleValue]: true, [currentWordValue]: true }));\r\n        setNumCorrectMatches(prev => prev + 1);\r\n        progress.awardCorrectAnswer(itemId, 'grammar-match-article');\r\n      } else {\r\n        setFeedback({ message: 'Incorrect Match. Try again.', type: 'incorrect' });\r\n        progress.awardIncorrectAnswer(itemId, 'grammar-match-article');\r\n        if (selectedArticle.elementRef) selectedArticle.elementRef.classList.add('incorrect-flash');\r\n        if (selectedWord.elementRef) selectedWord.elementRef.classList.add('incorrect-flash');\r\n        setTimeout(() => {\r\n            if (selectedArticle && selectedArticle.elementRef) selectedArticle.elementRef.classList.remove('incorrect-flash');\r\n            if (selectedWord && selectedWord.elementRef) selectedWord.elementRef.classList.remove('incorrect-flash');\r\n        }, 1000);\r\n      }\r\n      setSelectedArticle(null);\r\n      setSelectedWord(null);\r\n    }\r\n  }, [selectedArticle, selectedWord, actualPairs, language, progress]);\r\n\r\n  useEffect(() => {\r\n    if (actualPairs.length > 0 && numCorrectMatches === actualPairs.length && !isRevealed) {\r\n      setFeedback({ message: 'All pairs matched! Well done!', type: 'success' });\r\n    }\r\n  }, [numCorrectMatches, actualPairs.length, isRevealed]);\r\n\r\n  const showHint = () => {\r\n    if (isRevealed || numCorrectMatches === actualPairs.length) return;\r\n    const unMatched = actualPairs.filter(p => !matchedPairs[p.article] || !matchedPairs[p.word]); // This logic might be tricky if one part of pair is matched\r\n    if (unMatched.length > 0) {\r\n      const hintPair = unMatched[0]; // Simplified hint: reveals one correct pair\r\n      setFeedback({ \r\n        message: `Hint: Try matching \"${getLatinizedText(hintPair.article, language)}\" with \"${getLatinizedText(hintPair.word, language)}\".`, \r\n        type: 'hint' \r\n      });\r\n    } else {\r\n      setFeedback({ message: \"No more hints available.\", type: 'info' });\r\n    }\r\n  };\r\n  \r\n  const revealAllAnswers = () => {\r\n    setIsRevealed(true);\r\n    const allMatched = {};\r\n    actualPairs.forEach(p => {\r\n      allMatched[p.article] = true;\r\n      allMatched[p.word] = true;\r\n      const itemId = `gender_${p.word}_${p.article}`;\r\n      progress.scheduleReview(itemId, 'grammar-match-article', false); // Mark revealed as incorrect for SRS\r\n    });\r\n    setMatchedPairs(allMatched);\r\n    setNumCorrectMatches(actualPairs.length);\r\n    setFeedback({ message: \"All pairs revealed.\", type: 'info' });\r\n  };\r\n\r\n  if (isLoading) return <p>Loading matching exercise...</p>;\r\n  if (error) return <FeedbackDisplay message={error} type=\"error\" />;\r\n  if (actualPairs.length === 0 && !isLoading) return <FeedbackDisplay message=\"No pairs available for this exercise.\" type=\"info\" />;\r\n\r\n  const columnStyle = { display: 'flex', flexDirection: 'column', gap: '8px', alignItems: 'stretch', margin: '0 15px', flex: 1 };\r\n  const itemStyleBuilder = (value, type) => { // Removed 'ref' as it's not used for styling directly here\r\n    let isSelected = (type === 'article' && selectedArticle?.value === value) || (type === 'word' && selectedWord?.value === value);\r\n    return { \r\n        padding: '12px 18px', \r\n        border: `2px solid ${isSelected ? '#007bff' : (matchedPairs[value] ? '#28a745' : '#ccc')}`, \r\n        borderRadius: '8px', \r\n        cursor: (matchedPairs[value] || isRevealed) ? 'default' : 'pointer', \r\n        textAlign: 'center',\r\n        backgroundColor: matchedPairs[value] ? '#d4edda' : (isSelected ? '#cfe2ff' : '#f8f9fa'),\r\n        transition: 'background-color 0.2s, border-color 0.2s',\r\n        opacity: (isRevealed && !matchedPairs[value]) ? 0.5 : 1, // Dim if revealed and not part of a correct pair\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center', padding: '20px', border: '1px solid #eee', borderRadius: '8px' }}>\r\n      <h3>Match Articles with Words</h3>\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'flex-start', margin: '20px 0' }}>\r\n        <div style={columnStyle}>\r\n          <h4>Articles</h4>\r\n          {articlesColumn.map(article => {\r\n            const ref = React.createRef(); // Keep ref for click handler to pass element\r\n            return (\r\n            <button \r\n              key={`article-${article}`} \r\n              ref={ref}\r\n              style={itemStyleBuilder(article, 'article')}\r\n              onClick={() => handleItemClick(article, 'article', ref.current)}\r\n              disabled={matchedPairs[article] || isRevealed}\r\n            >\r\n              {getLatinizedText(article, language)}\r\n            </button>\r\n          )})}\r\n        </div>\r\n        <div style={columnStyle}>\r\n          <h4>Words</h4>\r\n          {wordsColumn.map(word => {\r\n            const ref = React.createRef(); // Keep ref for click handler\r\n            return (\r\n            <button \r\n              key={`word-${word}`} \r\n              ref={ref}\r\n              style={itemStyleBuilder(word, 'word')}\r\n              onClick={() => handleItemClick(word, 'word', ref.current)}\r\n              disabled={matchedPairs[word] || isRevealed}\r\n            >\r\n              {getLatinizedText(word, language)}\r\n            </button>\r\n          )})}\r\n        </div>\r\n      </div>\r\n      <FeedbackDisplay message={feedback.message} type={feedback.type} language={language} />\r\n      <ExerciseControls\r\n        onShowHint={!isRevealed && numCorrectMatches < actualPairs.length ? showHint : undefined}\r\n        onRevealAnswer={!isRevealed && numCorrectMatches < actualPairs.length ? revealAllAnswers : undefined}\r\n        onNextExercise={setupNewExercise}\r\n        config={{\r\n          showCheck: false, \r\n          showHint: !isRevealed && numCorrectMatches < actualPairs.length,\r\n          showReveal: !isRevealed && numCorrectMatches < actualPairs.length,\r\n          showNext: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MatchArticlesWordsExercise;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}