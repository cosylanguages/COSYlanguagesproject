{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import OriginalStorytellingExercise from'./OriginalStorytellingExercise';import StoryEmojisExercise from'./StoryEmojisExercise';import WhatHappensNextExercise from'./WhatHappensNextExercise';import WhatHappenedBeforeExercise from'./WhatHappenedBeforeExercise';import{useI18n}from'../../../../i18n/I18nContext';import{jsx as _jsx}from\"react/jsx-runtime\";const storytellingComponents=[OriginalStorytellingExercise,StoryEmojisExercise,WhatHappensNextExercise,WhatHappenedBeforeExercise];const StorytellingExercise=_ref=>{let{language,days,exerciseKey}=_ref;const[CurrentStoryType,setCurrentStoryType]=useState(null);const{t}=useI18n();const selectRandomStoryType=useCallback(()=>{const RandomComponent=storytellingComponents[Math.floor(Math.random()*storytellingComponents.length)];setCurrentStoryType(()=>RandomComponent);// Ensure it's a functional update for reliability\n},[]);// Select a random story type when the component mounts or exerciseKey changes\nuseEffect(()=>{selectRandomStoryType();},[selectRandomStoryType,exerciseKey]);// Handler to be passed to sub-components, allowing them to trigger a change in the parent\nconst handleNextStoryType=()=>{selectRandomStoryType();};if(!CurrentStoryType){return/*#__PURE__*/_jsx(\"p\",{children:t('loading.storytelling','Loading storytelling exercise...')});}// Pass necessary props, including the onNext handler\nreturn/*#__PURE__*/_jsx(CurrentStoryType,{language:language,days:days,onNext:handleNextStoryType});};export default StorytellingExercise;","map":{"version":3,"names":["React","useState","useEffect","useCallback","OriginalStorytellingExercise","StoryEmojisExercise","WhatHappensNextExercise","WhatHappenedBeforeExercise","useI18n","jsx","_jsx","storytellingComponents","StorytellingExercise","_ref","language","days","exerciseKey","CurrentStoryType","setCurrentStoryType","t","selectRandomStoryType","RandomComponent","Math","floor","random","length","handleNextStoryType","children","onNext"],"sources":["/workspaces/COSYlanguagesproject/src/components/Freestyle/exercises/writing/StorytellingExercise.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport OriginalStorytellingExercise from './OriginalStorytellingExercise';\r\nimport StoryEmojisExercise from './StoryEmojisExercise';\r\nimport WhatHappensNextExercise from './WhatHappensNextExercise';\r\nimport WhatHappenedBeforeExercise from './WhatHappenedBeforeExercise';\r\nimport { useI18n } from '../../../../i18n/I18nContext';\r\n\r\nconst storytellingComponents = [\r\n  OriginalStorytellingExercise,\r\n  StoryEmojisExercise,\r\n  WhatHappensNextExercise,\r\n  WhatHappenedBeforeExercise,\r\n];\r\n\r\nconst StorytellingExercise = ({ language, days, exerciseKey }) => {\r\n  const [CurrentStoryType, setCurrentStoryType] = useState(null);\r\n  const { t } = useI18n();\r\n\r\n  const selectRandomStoryType = useCallback(() => {\r\n    const RandomComponent = storytellingComponents[Math.floor(Math.random() * storytellingComponents.length)];\r\n    setCurrentStoryType(() => RandomComponent); // Ensure it's a functional update for reliability\r\n  }, []);\r\n\r\n  // Select a random story type when the component mounts or exerciseKey changes\r\n  useEffect(() => {\r\n    selectRandomStoryType();\r\n  }, [selectRandomStoryType, exerciseKey]);\r\n\r\n  // Handler to be passed to sub-components, allowing them to trigger a change in the parent\r\n  const handleNextStoryType = () => {\r\n    selectRandomStoryType();\r\n  };\r\n\r\n  if (!CurrentStoryType) {\r\n    return <p>{t('loading.storytelling', 'Loading storytelling exercise...')}</p>; \r\n  }\r\n\r\n  // Pass necessary props, including the onNext handler\r\n  return <CurrentStoryType language={language} days={days} onNext={handleNextStoryType} />;\r\n};\r\n\r\nexport default StorytellingExercise;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,4BAA4B,KAAM,gCAAgC,CACzE,MAAO,CAAAC,mBAAmB,KAAM,uBAAuB,CACvD,MAAO,CAAAC,uBAAuB,KAAM,2BAA2B,CAC/D,MAAO,CAAAC,0BAA0B,KAAM,8BAA8B,CACrE,OAASC,OAAO,KAAQ,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvD,KAAM,CAAAC,sBAAsB,CAAG,CAC7BP,4BAA4B,CAC5BC,mBAAmB,CACnBC,uBAAuB,CACvBC,0BAA0B,CAC3B,CAED,KAAM,CAAAK,oBAAoB,CAAGC,IAAA,EAAqC,IAApC,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,WAAY,CAAC,CAAAH,IAAA,CAC3D,KAAM,CAACI,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAAEkB,CAAE,CAAC,CAAGX,OAAO,CAAC,CAAC,CAEvB,KAAM,CAAAY,qBAAqB,CAAGjB,WAAW,CAAC,IAAM,CAC9C,KAAM,CAAAkB,eAAe,CAAGV,sBAAsB,CAACW,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAGb,sBAAsB,CAACc,MAAM,CAAC,CAAC,CACzGP,mBAAmB,CAAC,IAAMG,eAAe,CAAC,CAAE;AAC9C,CAAC,CAAE,EAAE,CAAC,CAEN;AACAnB,SAAS,CAAC,IAAM,CACdkB,qBAAqB,CAAC,CAAC,CACzB,CAAC,CAAE,CAACA,qBAAqB,CAAEJ,WAAW,CAAC,CAAC,CAExC;AACA,KAAM,CAAAU,mBAAmB,CAAGA,CAAA,GAAM,CAChCN,qBAAqB,CAAC,CAAC,CACzB,CAAC,CAED,GAAI,CAACH,gBAAgB,CAAE,CACrB,mBAAOP,IAAA,MAAAiB,QAAA,CAAIR,CAAC,CAAC,sBAAsB,CAAE,kCAAkC,CAAC,CAAI,CAAC,CAC/E,CAEA;AACA,mBAAOT,IAAA,CAACO,gBAAgB,EAACH,QAAQ,CAAEA,QAAS,CAACC,IAAI,CAAEA,IAAK,CAACa,MAAM,CAAEF,mBAAoB,CAAE,CAAC,CAC1F,CAAC,CAED,cAAe,CAAAd,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}